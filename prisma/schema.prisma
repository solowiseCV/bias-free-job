generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

enum UserType {
  job_seeker
  recruiter
  
}

model User {
  id                     String            @id @default(auto()) @map("_id") @db.ObjectId
  email                  String            @unique
  lastname               String
  firstname              String
  password               String?
  avatar                 String?
  authId                 String?          
  userType               UserType 
  resetToken             String?
  resetTokenExpires      DateTime?
  companyProfiles        CompanyProfile[]  @relation("UserCompanyProfiles")
}

model CompanyProfile {
  id                     String            @id @default(auto()) @map("_id") @db.ObjectId
  userId                 String            @db.ObjectId
  user                   User              @relation("UserCompanyProfiles", fields: [userId], references: [id])
  companyName            String
  description            String
  industry               String
  website                String?
  location               String?
  numberOfEmployees      String?
  hiringTeams            HiringTeam[]      @relation("CompanyHiringTeams")
  createdAt              DateTime          @default(now())
}

model HiringTeam {
  id                     String            @id @default(auto()) @map("_id") @db.ObjectId
  companyProfileId       String            @db.ObjectId
  companyProfile         CompanyProfile    @relation("CompanyHiringTeams", fields: [companyProfileId], references: [id])
  teamMembers            TeamMember[]      @relation("HiringTeamMembers")
  createdAt              DateTime          @default(now())
}

model TeamMember {
  id                     String            @id @default(auto()) @map("_id") @db.ObjectId
  hiringTeamId           String            @db.ObjectId
  hiringTeam             HiringTeam        @relation("HiringTeamMembers", fields: [hiringTeamId], references: [id])
  email                  String            
  role                   String
  createdAt              DateTime          @default(now())
}